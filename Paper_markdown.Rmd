---
title: "Paper_text_working_file"
author: "Addison"
date: "April 5, 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
#Packages 

install.packages("tidyverse")

library(plyr)
library(tidyverse)
library(haven)

#Data generation process 

dyadic_mid_3_1_may_2018 <-as_tibble( read_dta("C:/Users/packe/Documents/Methods_3/Paper/Datasets/dyadic_mid_3.1_may_2018.dta"))
View(dyadic_mid_3_1_may_2018)

#Renaming variables in MIDs data
Dyadic_MID <- dyadic_mid_3_1_may_2018 %>%
  rename(
    ccodea = statea,
    ccodeb = stateb
  ) 
Dyadic_MID


#Relative capabilities data
NMC_5_0 <- as_tibble(read_dta("C:/Users/packe/Documents/Methods_3/Paper/Datasets/NMC_5_0.dta"))
View(NMC_5_0)
NMC <- select(NMC_5_0, ccode, year, irst, milex, milper, pec, tpop, upop, cinc)
NMCA <- NMC %>%
  rename(
    ccodea = ccode,
    irsta = irst,
    milexa = milex,
    milpera = milper,
    peca = pec,
    tpopa = tpop,
    upopa = upop,
    cinca = cinc
  ) 
NMCA
  
NMCB <- NMC %>%
  rename(
    ccodeb = ccode,
    irstb = irst,
    milexb = milex,
    milperb = milper,
    pecb = pec,
    tpopb = tpop,
    upopb = upop,
    cincb = cinc
  ) 
NMCB

#Importing naval data, removing all but the data for the U.S., keeping only relevant variables.
crisher_souva_navaldata_II <- as_tibble(read_dta("C:/Users/packe/Documents/Methods_3/Paper/Datasets/crisher_souva_navaldata_II.dta"))
View(crisher_souva_navaldata_II)
Naval1 <- filter(crisher_souva_navaldata_II, cowcode == 2)
Naval2 <- select(Naval1, year, totton, tonn_prop, milex, milper)

#Importing PolityIV data and creating two seperate datasets to apply to both members of the dyad.
PolityIV <- as_tibble(read_dta("C:/Users/packe/Documents/Methods_3/Paper/Datasets/PolityIV.dta"))
view(PolityIV)

PolityIV1 <- select(PolityIV, year, ccode, democ, autoc, polity, polity2)
PolityIVa <- PolityIV1 %>%
  rename(
    ccodea = ccode,
    democa = democ,
    autoca = autoc,
    politya = polity,
    polity2a = polity2
  ) 
view(PolityIVa)

PolityIVb <- PolityIV1 %>%
  rename(
    ccodeb = ccode,
    democb = democ,
    autocb = autoc,
    polityb = polity,
    polity2b = polity2
  ) 
PolityIVb

Atop <- as_tibble(read_dta("C:/Users/packe/Documents/Methods_3/Paper/Datasets/Atop_stata.dta"))
view(Atop)

politically_relevant <- as_tibble(read_dta("C:/Users/packe/Documents/Methods_3/Paper/Datasets/politically_relevant.dta"))
view(politically_relevant)

Master <- politically_relevant %>%
  rename(
    ccodea = ccode1,
    ccodeb = ccode2, 
  ) 
Master

#mergin in dyadic mid data
Master2 <- full_join(Master, Dyadic_MID, by=c("ccodea", "ccodeb", "year"), copy=FALSE, suffix=c("x", "y"))

#Merging in polity iv datasets a and b.
Master2 <- inner_join(Master2, PolityIVa, by=c("ccodea", "year"), copy=FALSE, suffix=c("x", "y"))
Master2 <- inner_join(Master2, PolityIVb, by=c("ccodeb", "year"), copy=FALSE, suffix=c("x", "y"))

#merging in data on US naval capabilities
Master2 <- inner_join(Master2, Naval2, by=c("year"), copy=FALSE, suffix=c("x", "y"))

#merging in data on material capabilities
Master2 <- inner_join(Master2, NMCA, by=c("ccodea", "year"), copy=FALSE, suffix=c("x", "y"))
Master2 <- inner_join(Master2, NMCB, by=c("ccodeb", "year"), copy=FALSE, suffix=c("x", "y"))

Master2 <- full_join(Master2, Atop, by=c("ccodea", "ccodeb", "year"), copy=FALSE, suffix=c("x", "y"))

Master3 <- filter(Master2, ccodea != 2, ccodeb != 2, year <= 2012, year >= 1949)

